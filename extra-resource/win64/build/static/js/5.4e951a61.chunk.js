(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[5],{326:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(113);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(s){r=!0,l=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},438:function(e,t,a){"use strict";var n=a(31),r=a(32),l=a(68),c=a(67),o=a(0),s=a.n(o),i=a(356),u=a(666),d=a(357),m=a(360),p=a(33),b=a.n(p),f=a(534),g=a(107),h=a(455),E=a(38);function v(){return b.a.createPortal(s.a.createElement(f.a,{mode:"modal"}),document.getElementById(E.e))}var y=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).toggleCheckStatus=function(){var t=e.props,a=t.checkStatus,n=t.enableCheckStatus;console.log(a,n),n(!a)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getStatus(),this.refreshInterval=setInterval((function(){return e.props.getStatus()}),E.g)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"render",value:function(){var e=this.props,t=e.isConnected,a=e.mode,n=e.checkStatus,r=localStorage.getItem(E.c),l=localStorage.getItem(E.h);return"card"===a?s.a.createElement(i.a,{className:"text-center "+(t?"card-accent-info":"card-accent-warning")},s.a.createElement(u.a,null,"Overview"),s.a.createElement(d.a,null,s.a.createElement(O,{checkStatus:n,connectivityStatus:t,ipAddress:r,userName:l}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{type:"primary",onClick:this.toggleCheckStatus,className:t?"bg-info  d-none d-lg-block":"bg-warning d-none d-lg-block"}," ",n?t?"CONNECTED":"DISCONNECTED":"DISABLED"),s.a.createElement(v,null))}}]),a}(s.a.Component);function O(e){var t=e.connectivityStatus,a=e.checkStatus,n=e.ipAddress,r=e.userName,l="";return l=a?t?"rClone Backend is connected and working as expected":"Cannot connect to rclone backend. There is a problem with connecting to {ipAddress}.":"Not monitoring connectivity status. Tap the icon in navbar to start.",s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,s.a.createElement("span",{className:"card-subtitle"},"Status: "," "),s.a.createElement("span",{className:"card-text"},l)),s.a.createElement("p",null,s.a.createElement("span",{className:"card-subtitle"},"Current IP Address: "," "),s.a.createElement("span",{className:"card-text"},n)),s.a.createElement("p",null,s.a.createElement("span",{className:"card-subtitle"},"Username: "," "),s.a.createElement("span",{className:"card-text"},r)))}y.defaultProps={mode:"card"};t.a=Object(g.b)((function(e){return{isConnected:e.status.isConnected,isDisabled:e.status.isDisabled,checkStatus:e.status.checkStatus}}),{getStatus:h.c,enableCheckStatus:h.a})(y)},455:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return d}));var n=a(86),r=a.n(n),l=a(111),c=a(3),o=a(334),s=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),n.status.checkStatus&&Object(o.getStats)().then((function(e){return t({type:c.s,status:c.L,payload:e})}),(function(e){return t({type:c.s,status:c.J,payload:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},i=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:c.r,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.getCurrentBandwidthSetting)().then((function(e){return t({type:c.t,status:c.L,payload:e})}),(function(e){return t({type:c.t,status:c.J,payload:e})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(o.setCurrentBandwidthSetting)(e).then((function(e){return a({type:c.M,status:c.L,payload:e})}),(function(e){return a({type:c.M,status:c.J,payload:e})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},534:function(e,t,a){"use strict";var n=a(31),r=a(32),l=a(68),c=a(67),o=a(326),s=a(0),i=a.n(s),u=a(356),d=a(666),m=a(357),p=a(6),b=a(109),f=a(12),g=a(4),h=a.n(g),E=a(37),v=a.n(E),y=a(29);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={children:h.a.node,bar:h.a.bool,multi:h.a.bool,tag:y.q,value:h.a.oneOfType([h.a.string,h.a.number]),min:h.a.oneOfType([h.a.string,h.a.number]),max:h.a.oneOfType([h.a.string,h.a.number]),animated:h.a.bool,striped:h.a.bool,color:h.a.string,className:h.a.string,barClassName:h.a.string,cssModule:h.a.object,style:h.a.object,barStyle:h.a.object,barAriaValueText:h.a.string,barAriaLabelledBy:h.a.string},S=function(e){var t=e.children,a=e.className,n=e.barClassName,r=e.cssModule,l=e.value,c=e.min,o=e.max,s=e.animated,u=e.striped,d=e.color,m=e.bar,b=e.multi,g=e.tag,h=e.style,E=e.barStyle,O=e.barAriaValueText,N=e.barAriaLabelledBy,S=Object(f.a)(e,["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"]),C=Object(y.s)(l)/Object(y.s)(o)*100,k=Object(y.m)(v()(a,"progress"),r),x={className:Object(y.m)(v()("progress-bar",m&&a||n,s?"progress-bar-animated":null,d?"bg-"+d:null,u||s?"progress-bar-striped":null),r),style:j(j(j({},m?h:{}),E),{},{width:C+"%"}),role:"progressbar","aria-valuenow":l,"aria-valuemin":c,"aria-valuemax":o,"aria-valuetext":O,"aria-labelledby":N,children:t};return m?i.a.createElement(g,Object(p.a)({},S,x)):i.a.createElement(g,Object(p.a)({},S,{style:h,className:k}),b?t:i.a.createElement("div",x))};S.propTypes=N,S.defaultProps={tag:"div",value:0,min:0,max:100,style:{},barStyle:{}};var C=S,k=a(83),x=a(50),w=a(318),T=a(360),P=a(667),A=a(84),D=a(107),I=a(439),B=a(665),L=a(85),H=a(51),M=a(39),R={tooltips:{enabled:!1,custom:B.CustomTooltips},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{display:!1}}]}};function J(e){var t=e.job,a=t.name,n=t.eta,r=t.percentage,l=t.speed,c=t.speedAvg,o=t.size,s=t.bytes;return a&&!isNaN(l)?i.a.createElement(u.a,null,i.a.createElement(d.a,null,"Running Jobs"),i.a.createElement(m.a,null,i.a.createElement("p",null,a)," ",i.a.createElement(C,{value:r,className:"mb-2"},r," %")," ",i.a.createElement("p",null,i.a.createElement("strong",null,"Speed: "),Object(A.g)(l),"PS")," ",i.a.createElement("p",null,i.a.createElement("strong",null,"Average Speed: "),Object(A.g)(c),"PS")," ",i.a.createElement("p",null,i.a.createElement("strong",null,"Total transferred: "),Object(A.g)(s))," ",i.a.createElement("p",null,i.a.createElement("strong",null,"Size: "),Object(A.g)(o)),i.a.createElement("p",null,i.a.createElement("strong",null,"ETA: "),Object(A.m)(n)))):null}function _(e){var t=e.job,a=t.name,n=t.percentage,r=t.speedAvg,l=t.size;return console.log("Job:"+t),i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{className:"runningJobs"},l&&r?i.a.createElement(x.a,{lg:12,className:"itemName"}," ",function(e){return e.length>30?e.substr(0,30)+" ... "+e.substr(-5):e}(a)," "," ","(",Object(A.g)(l),") - ",Object(A.g)(r),"PS "):i.a.createElement(x.a,{lg:12},"Calculating")),i.a.createElement(k.a,null,i.a.createElement(x.a,{lg:12},i.a.createElement(C,{value:n,className:"mb-2"},n," %"))))}function V(e){var t=e.stats,a=t.speed,n=t.bytes,r=t.checks,l=t.elapsedTime,c=t.deletes,o=t.errors,s=t.transfers,p=t.lastError;return i.a.createElement(u.a,null,i.a.createElement(d.a,null,i.a.createElement("strong",null,"Global Stats")),i.a.createElement(m.a,null,i.a.createElement("table",{className:"table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Bytes Transferred:"),i.a.createElement("td",{className:"card-text"},Object(A.g)(n))),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Average Speed:"),i.a.createElement("td",{className:"card-text"},Object(A.g)(a),"PS")),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Checks:"),i.a.createElement("td",{className:"card-text"},r)),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Deletes:"),i.a.createElement("td",{className:"card-text"},c)),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Running since:"),i.a.createElement("td",{className:"card-text"},Object(A.m)(l))),i.a.createElement("tr",{className:o>0?"table-danger":""},i.a.createElement("td",{className:"card-subtitle"},"Errors:"),i.a.createElement("td",{className:"card-text"},o)),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Transfers:"),i.a.createElement("td",{className:"card-text"},s)),i.a.createElement("tr",null,i.a.createElement("td",{className:"card-subtitle"},"Last Error:"),i.a.createElement("td",{className:"card-text"},p))))))}function F(e){var t=e.transferring;return void 0!==t?t.map((function(e,t){return i.a.createElement(J,{key:e.name,job:e})})):null}function W(e){var t=e.transferring;if(void 0!==t){var a=Object(A.i)(t,(function(e){return e.group})),n=[];return a.forEach((function(e,t){n.push(i.a.createElement(z,{job:e,groupId:t,key:t}))})),n}return null}function z(e){var t=e.job,a=e.groupId,n=Object(s.useState)(!1),r=Object(o.a)(n,2),l=r[0],c=r[1],p=Object(s.useState)(!0),b=Object(o.a)(p,2),f=b[0],g=b[1];return t?i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(u.a,null,i.a.createElement(d.a,{onClick:function(){return c(!l)}},i.a.createElement(w.a,null,i.a.createElement(k.a,null,i.a.createElement(x.a,{sm:10},"Transferring ",t.length," file(s)"),i.a.createElement(x.a,{sm:2},i.a.createElement(T.a,{color:"light",disabled:!f,onClick:function(e){return function(e,t){if(e.stopPropagation(),t&&-1!==t.indexOf("/")){g(!1);var a=t.split("/")[1];L.a.post(H.a.stopJob,{jobid:a,_async:!0}).then((function(e){M.b.info("Job ".concat(a," stopped"))})).catch((function(e){M.b.error("Job ".concat(a," couldn't be stopped"))}))}}(e,a)},className:"btn-outline-danger btn-pill"},i.a.createElement("i",{className:"fa fa-close fa-sm"})))))),i.a.createElement(P.a,{isOpen:l},i.a.createElement(m.a,null,t.map((function(e,t){return i.a.createElement(_,{key:e.name,job:e})})))))):null}var G=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e,r){var l;return Object(n.a)(this,a),(l=t.call(this,e,r)).toggleShowing=function(){l.setState((function(e){return{isShowing:!e.isShowing}}))},l.state={isShowing:!0},l}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.jobs,n=t.isConnected,r=t.lineChartData,l=a.transferring,c=this.props.mode;return"full-status"===c?n?i.a.createElement(k.a,null,i.a.createElement(x.a,{sm:12,lg:6},i.a.createElement(V,{stats:a})),i.a.createElement(x.a,{sm:12,lg:6},i.a.createElement(u.a,null,i.a.createElement(d.a,null,"Speed"),i.a.createElement(m.a,null,i.a.createElement("div",{className:"chart-wrapper"},i.a.createElement(I.Line,{data:r,options:R}))))),i.a.createElement(x.a,{sm:12,lg:4},i.a.createElement(F,{transferring:l}))):i.a.createElement("div",null,"Not connected to rclone."):"card"===c?n?i.a.createElement(W,{transferring:l}):i.a.createElement("div",null,"Not connected to rclone."):"modal"===c?l&&l.length>0?i.a.createElement(u.a,{className:"progress-modal d-none d-sm-block"},i.a.createElement(d.a,{onClick:function(){return e.toggleShowing()}},"Progress",i.a.createElement("div",{className:"card-header-actions"},i.a.createElement(T.a,{color:"link"},i.a.createElement("i",{className:"fa fa-close fa-lg"})))),i.a.createElement(m.a,{className:this.state.isShowing?"progress-modal-body":"d-none",style:{overflowY:"scroll"}},i.a.createElement(W,{transferring:l}))):null:void 0}}]),a}(i.a.Component);t.a=Object(D.b)((function(e,t){var a=e.status.speed,n={};if(a){var r=[],l=[],c=[],o=a.length;a.slice(o-50,o-1).forEach((function(e,t){r.push(Math.ceil(e.elapsedTime)),l.push(Object(A.c)(e.speed).toFixed(2)),c.push(Object(A.c)(e.speedAvg).toFixed(2))})),n={labels:r,datasets:[{label:"Speed (kbps)",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:l},{label:"Average Speed (kbps)",fill:!0,lineTension:.1,backgroundColor:"rgba(187,69,14,0.4)",borderColor:"rgb(192,76,58)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(187,69,14)",pointBackgroundColor:"#ff7459",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:c}]}}return{jobs:e.status.jobs,isConnected:e.status.isConnected,error:e.status.error,lineChartData:n}}),{})(G)},665:function(e,t,a){!function(e){"use strict";function t(e){var t=this,a="above",n="below",r="chartjs-tooltip",l="no-transform",c="tooltip-body",o="tooltip-body-item",s="tooltip-body-item-color",i="tooltip-body-item-label",u="tooltip-body-item-value",d="tooltip-header",m="tooltip-header-item",p={DIV:"div",SPAN:"span",TOOLTIP:(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-"+(e()+e());return t._chart.canvas.id=a,a}())+"-tooltip"},b=document.getElementById(p.TOOLTIP);if(b||((b=document.createElement("div")).id=p.TOOLTIP,b.className=r,this._chart.canvas.parentNode.appendChild(b)),0!==e.opacity){if(b.classList.remove(a,n,l),e.yAlign?b.classList.add(e.yAlign):b.classList.add(l),e.body){var f=e.title||[],g=document.createElement(p.DIV);g.className=d,f.forEach((function(e){var t=document.createElement(p.DIV);t.className=m,t.innerHTML=e,g.appendChild(t)}));var h=document.createElement(p.DIV);h.className=c,e.body.map((function(e){return e.lines})).forEach((function(t,a){var n=document.createElement(p.DIV);n.className=o;var r=e.labelColors[a],l=document.createElement(p.SPAN);if(l.className=s,l.style.backgroundColor=r.backgroundColor,n.appendChild(l),t[0].split(":").length>1){var c=document.createElement(p.SPAN);c.className=i,c.innerHTML=t[0].split(": ")[0],n.appendChild(c);var d=document.createElement(p.SPAN);d.className=u,d.innerHTML=t[0].split(": ").pop(),n.appendChild(d)}else{var m=document.createElement(p.SPAN);m.className=u,m.innerHTML=t[0],n.appendChild(m)}h.appendChild(n)})),b.innerHTML="",b.appendChild(g),b.appendChild(h)}var E=this._chart.canvas.getBoundingClientRect(),v=this._chart.canvas.offsetTop,y=this._chart.canvas.offsetLeft+e.caretX,O=v+e.caretY,j=e.width/2;y+j>E.width?y-=j:y<j&&(y+=j),b.style.opacity=1,b.style.left=y+"px",b.style.top=O+"px"}else b.style.opacity=0}var a=t;e.CustomTooltips=t,e.customTooltips=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},667:function(e,t,a){"use strict";var n,r=a(6),l=a(12),c=a(322),o=a(22),s=a(109),i=a(0),u=a.n(i),d=a(4),m=a.n(d),p=a(37),b=a.n(p),f=a(372),g=a(29);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=E(E({},f.Transition.propTypes),{},{isOpen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:g.q,className:m.a.node,navbar:m.a.bool,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])}),y=E(E({},f.Transition.defaultProps),{},{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:g.e.Collapse}),O=((n={})[g.d.ENTERING]="collapsing",n[g.d.ENTERED]="collapse show",n[g.d.EXITING]="collapsing",n[g.d.EXITED]="collapse",n);function j(e){return e.scrollHeight}var N=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){a[e]=a[e].bind(Object(c.a)(a))})),a}Object(o.a)(t,e);var a=t.prototype;return a.onEntering=function(e,t){this.setState({height:j(e)}),this.props.onEntering(e,t)},a.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},a.onExit=function(e){this.setState({height:j(e)}),this.props.onExit(e)},a.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},a.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},a.render=function(){var e=this,t=this.props,a=t.tag,n=t.isOpen,c=t.className,o=t.navbar,s=t.cssModule,i=t.children,d=(t.innerRef,Object(l.a)(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),m=this.state.height,p=Object(g.o)(d,g.c),h=Object(g.n)(d,g.c);return u.a.createElement(f.Transition,Object(r.a)({},p,{in:n,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var n=function(e){return O[e]||"collapse"}(t),l=Object(g.m)(b()(c,n,o&&"navbar-collapse"),s),d=null===m?null:{height:m};return u.a.createElement(a,Object(r.a)({},h,{style:E(E({},h.style),d),className:l,ref:e.props.innerRef}),i)}))},t}(i.Component);N.propTypes=v,N.defaultProps=y,t.a=N}}]);
//# sourceMappingURL=5.4e951a61.chunk.js.map